(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{2344:function(e,t,i){"use strict";const s=i(2),r=i(5),o=i(631),d=i(2411),n=i(13),a=i(8),p=i(200),h=i(552);e.exports=class extends r.Component{constructor(){super(...arguments),this.reSizeEditor=(()=>{const e=o.getHeight();this.standardEditorNode.style.height=e-(n.isEclipse()?60:8.5*p.defaultFontSize)+"px",this.diffEditorNode.style.height=e-(n.isEclipse()?60:8.5*p.defaultFontSize)+"px"})}render(){const{hasError:e,diffType:t}=this.props;return r.createElement("div",null,r.createElement("div",{ref:e=>this.standardEditorNode=e,id:"editor",style:e||0!==t?{display:"none"}:{}}),r.createElement("div",{ref:e=>this.diffEditorNode=e,id:"diff_editor",style:e||0===t?{display:"none"}:{}}))}componentDidMount(){const e=this.getFileType();this.pastModel=d.editor.createModel("",e),this.presentModel=d.editor.createModel("",e),this.diffEditor=d.editor.createDiffEditor(this.diffEditorNode,{automaticLayout:!0,readOnly:!0,lineNumbers:n.isUnderTest()?"off":"on",renderSideBySide:2===this.props.diffType,fontSize:p.defaultFontSize}),this.diffEditor.setModel({original:this.pastModel,modified:this.presentModel}),this.diffEditor.onDidUpdateDiff(()=>{const e=s.first(this.diffEditor.getLineChanges());e&&this.diffEditor.revealLineInCenter(s.min([e.modifiedStartLineNumber,e.originalStartLineNumber]))}),d.editor.defineTheme("darkTheme",{base:"vs-dark",inherit:!0,rules:[],colors:{"editor.background":h.tiGrey[800],"editor.lineHighlightBackground":"#4D4D4F"}}),d.editor.defineTheme("lightTheme",{base:"vs",inherit:!0,rules:[],colors:{}}),"dark"===this.props.theme.name?d.editor.setTheme("darkTheme"):"light"===this.props.theme.name?d.editor.setTheme("lightTheme"):a.assertUnreachable(this.props.theme.name),this.standardEditor=d.editor.create(this.standardEditorNode,{automaticLayout:!0,readOnly:!0,model:this.presentModel,lineNumbers:n.isUnderTest()?"off":"on",minimap:{enabled:!1},fontSize:p.defaultFontSize}),this.setEditorValue(),this.reSizeEditor(),window.addEventListener("resize",this.reSizeEditor)}componentWillUnmount(){this.standardEditor.dispose(),this.diffEditor.dispose(),this.pastModel.dispose(),this.presentModel.dispose(),window.removeEventListener("resize",this.reSizeEditor)}componentDidUpdate(e){if(this.propsChanged(e)&&(this.setEditorValue(),this.props.diffType!==e.diffType)){const e={renderSideBySide:2===this.props.diffType};this.diffEditor.updateOptions(e)}}propsChanged(e){return!s.isEqual(this.props,e)}setEditorValue(){!this.props.hasError&&this.props.currentContent&&(this.props.previousContent!==this.pastModel.getValue()&&this.pastModel.setValue(this.props.previousContent),this.props.currentContent!==this.presentModel.getValue()&&this.presentModel.setValue(this.props.currentContent))}getFileType(){switch(this.props.file.name.split(".").pop().toLowerCase()){case"js":case"xs":case"syscfg":return"javascript";case"json":return"json";case"c":case"h":return"c";case"cpp":case"hpp":return"cpp";default:return"plaintext"}}}}}]);
//# sourceMappingURL=LazyEditor.bundle.js.map
