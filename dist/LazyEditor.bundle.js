(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{2138:function(e,t,i){"use strict";(function(t){const s=i(1),r=i(0),o=i(2183),d=i(12),n=i(3),p=i(169),a=i(572),h=i(598);class l extends r.Component{constructor(){super(...arguments),this.scrollAfterRender=!1,this.reSizeEditor=()=>{const e=h.getHeight();this.standardEditorNode.style.height=e-(d.isEclipse()?60:8.5*p.defaultFontSize)+"px",this.diffEditorNode.style.height=e-(d.isEclipse()?60:8.5*p.defaultFontSize)+"px"},this.scrollToFirstDifference=()=>{if(0!==this.props.diffType){const e=s.first(this.diffEditor.getLineChanges());e&&this.diffEditor.revealLineInCenterIfOutsideViewport(s.min([e.modifiedStartLineNumber,e.originalStartLineNumber]))}}}render(){this.scrollAfterRender&&(this.scrollAfterRender=!1,t(()=>{this.scrollToFirstDifference()}));const{hasError:e,diffType:i}=this.props;return r.createElement("div",null,r.createElement("div",{ref:e=>this.standardEditorNode=e,id:"editor",style:e||0!==i?{display:"none"}:{}}),r.createElement("div",{ref:e=>this.diffEditorNode=e,id:"diff_editor",style:e||0===i?{display:"none"}:{}}))}componentDidMount(){const e=this.getFileType();this.pastModel=o.editor.createModel("",e),this.presentModel=o.editor.createModel("",e),this.diffEditor=o.editor.createDiffEditor(this.diffEditorNode,{automaticLayout:!0,readOnly:!0,lineNumbers:d.isUnderTest()?"off":"on",renderSideBySide:2===this.props.diffType,fontSize:p.defaultFontSize}),this.diffEditor.setModel({original:this.pastModel,modified:this.presentModel}),this.subscription=this.diffEditor.onDidUpdateDiff(this.scrollToFirstDifference),o.editor.defineTheme("darkTheme",{base:"vs-dark",inherit:!0,rules:[],colors:{"editor.background":a.tiGrey[800],"editor.lineHighlightBackground":"#4D4D4F"}}),o.editor.defineTheme("lightTheme",{base:"vs",inherit:!0,rules:[],colors:{}}),"dark"===this.props.theme.name?o.editor.setTheme("darkTheme"):"light"===this.props.theme.name?o.editor.setTheme("lightTheme"):n.assertUnreachable(this.props.theme.name),this.standardEditor=o.editor.create(this.standardEditorNode,{automaticLayout:!0,readOnly:!0,model:this.presentModel,lineNumbers:d.isUnderTest()?"off":"on",minimap:{enabled:!1},fontSize:p.defaultFontSize}),this.setEditorValue(),this.reSizeEditor(),window.addEventListener("resize",this.reSizeEditor)}componentWillUnmount(){this.subscription.dispose(),this.standardEditor.dispose(),this.diffEditor.dispose(),this.pastModel.dispose(),this.presentModel.dispose(),window.removeEventListener("resize",this.reSizeEditor)}componentDidUpdate(e){if(this.propsChanged(e)&&(this.setEditorValue(),this.props.diffType!==e.diffType)){const t={renderSideBySide:2===this.props.diffType};this.diffEditor.updateOptions(t),0===e.diffType&&(this.scrollAfterRender=!0)}}propsChanged(e){return!s.isEqual(this.props,e)}setEditorValue(){!this.props.hasError&&this.props.currentContent&&(this.props.previousContent!==this.pastModel.getValue()&&this.pastModel.setValue(this.props.previousContent),this.props.currentContent!==this.presentModel.getValue()&&this.presentModel.setValue(this.props.currentContent))}getFileType(){switch(this.props.file.name.split(".").pop().toLowerCase()){case"js":case"xs":case"syscfg":return"javascript";case"json":return"json";case"c":case"h":return"c";case"cpp":case"hpp":return"cpp";default:return"plaintext"}}}e.exports=l}).call(this,i(177).setImmediate)},2237:function(e,t){e.exports="undefined"==typeof ti_testing_originalPromise?Promise:ti_testing_originalPromise}}]);
//# sourceMappingURL=LazyEditor.bundle.js.map
