(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{2271:function(e,t,i){"use strict";const s=i(3),r=i(2),o=i(2298),d=i(13),n=i(6),a=i(181),p=i(464),h=i(572);e.exports=class extends r.Component{constructor(){super(...arguments),this.reSizeEditor=(()=>{const e=h.getHeight();this.standardEditorNode.style.height=e-(d.isEclipse()?60:8.5*a.defaultFontSize)+"px",this.diffEditorNode.style.height=e-(d.isEclipse()?60:8.5*a.defaultFontSize)+"px"})}render(){const{hasError:e,diffType:t}=this.props;return r.createElement("div",null,r.createElement("div",{ref:e=>this.standardEditorNode=e,id:"editor",style:e||0!==t?{display:"none"}:{}}),r.createElement("div",{ref:e=>this.diffEditorNode=e,id:"diff_editor",style:e||0===t?{display:"none"}:{}}))}componentDidMount(){const e=this.getFileType();this.pastModel=o.editor.createModel("",e),this.presentModel=o.editor.createModel("",e),this.diffEditor=o.editor.createDiffEditor(this.diffEditorNode,{automaticLayout:!0,readOnly:!0,lineNumbers:d.isUnderTest()?"off":"on",renderSideBySide:2===this.props.diffType,fontSize:a.defaultFontSize}),this.diffEditor.setModel({original:this.pastModel,modified:this.presentModel}),this.diffEditor.onDidUpdateDiff(()=>{const e=s.first(this.diffEditor.getLineChanges());e&&this.diffEditor.revealLineInCenter(s.min([e.modifiedStartLineNumber,e.originalStartLineNumber]))}),o.editor.defineTheme("darkTheme",{base:"vs-dark",inherit:!0,rules:[],colors:{"editor.background":p.tiGrey[800],"editor.lineHighlightBackground":"#4D4D4F"}}),o.editor.defineTheme("lightTheme",{base:"vs",inherit:!0,rules:[],colors:{}}),"dark"===this.props.theme.name?o.editor.setTheme("darkTheme"):"light"===this.props.theme.name?o.editor.setTheme("lightTheme"):n.assertUnreachable(this.props.theme.name),this.standardEditor=o.editor.create(this.standardEditorNode,{automaticLayout:!0,readOnly:!0,model:this.presentModel,lineNumbers:d.isUnderTest()?"off":"on",minimap:{enabled:!1},fontSize:a.defaultFontSize}),this.setEditorValue(),this.reSizeEditor(),window.addEventListener("resize",this.reSizeEditor)}componentWillUnmount(){this.standardEditor.dispose(),this.diffEditor.dispose(),this.pastModel.dispose(),this.presentModel.dispose(),window.removeEventListener("resize",this.reSizeEditor)}componentDidUpdate(e){if(this.propsChanged(e)&&(this.setEditorValue(),this.props.diffType!==e.diffType)){const e={renderSideBySide:2===this.props.diffType};this.diffEditor.updateOptions(e)}}propsChanged(e){return!s.isEqual(this.props,e)}setEditorValue(){!this.props.hasError&&this.props.currentContent&&(this.props.previousContent!==this.pastModel.getValue()&&this.pastModel.setValue(this.props.previousContent),this.props.currentContent!==this.presentModel.getValue()&&this.presentModel.setValue(this.props.currentContent))}getFileType(){switch(this.props.file.name.split(".").pop().toLowerCase()){case"js":case"xs":case"syscfg":return"javascript";case"json":return"json";case"c":case"h":return"c";case"cpp":case"hpp":return"cpp";default:return"plaintext"}}}}}]);
//# sourceMappingURL=LazyEditor.bundle.js.map
